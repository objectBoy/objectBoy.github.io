
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PHP7新增 - 清青的驿站</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="清青,"> 
    <meta name="description" content="浅显难羁宝剑锋，玉藏石中也玲珑,PHP.7第一篇查看PHP安装信息123/*phpinfo.php*/&amp;lt;?phpphpinfo();?&amp;gt;
http://localhost/phpinfo.php 
PHP配置文件 ph,"> 
    <meta name="author" content="清青"> 
    <link rel="alternative" href="atom.xml" title="清青的驿站" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>

<body class="loading">
    <span id="config-title" style="display:none">清青的驿站</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="http://yoursite.com"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">PHP7新增</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">PHP7新增</h1>
        <div class="stuff">
            <span>九月 28, 2017</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/PHP/">PHP</a></li></ul>


        </div>
        <div class="content markdown">
            <h1 id="PHP-7第一篇"><a href="#PHP-7第一篇" class="headerlink" title="PHP.7第一篇"></a>PHP.7第一篇</h1><h2 id="查看PHP安装信息"><a href="#查看PHP安装信息" class="headerlink" title="查看PHP安装信息"></a>查看PHP安装信息</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*phpinfo.php*/</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">phpinfo();<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="http://localhost/phpinfo.php" target="_blank" rel="external">http://localhost/phpinfo.php</a> </p>
<h1 id="PHP配置文件"><a href="#PHP配置文件" class="headerlink" title="PHP配置文件"></a>PHP配置文件</h1><p> php.ini 中的配置会影响到 PHP 的功能最终和最直接的方式</p>
<h2 id="标量类型声明"><a href="#标量类型声明" class="headerlink" title="标量类型声明"></a>标量类型声明</h2><blockquote>
<ul>
<li>int</li>
<li>float</li>
<li>bool</li>
<li>string</li>
<li>interfaces</li>
<li>array</li>
<li>callable</li>
</ul>
<p>这些类型可以通过下述模式强制执行</p>
</blockquote>
<h3 id="强制方式（默认）"><a href="#强制方式（默认）" class="headerlink" title="强制方式（默认）"></a>强制方式（默认）</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">// Coercive mode</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(int ...$ints)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> array_sum($ints);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">print</span>(sum(<span class="number">2</span>, <span class="string">'3'</span>, <span class="number">4.1</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 9</p>
<h3 id="严格方式"><a href="#严格方式" class="headerlink" title="严格方式"></a>严格方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">// Strict mode</span></span><br><span class="line">   <span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(int ...$ints)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> array_sum($ints);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">print</span>(sum(<span class="number">2</span>, <span class="string">'3'</span>, <span class="number">4.1</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Fatal error: Uncaught TypeError: Argument 2 passed to sum() must be of the type integer, string given, …</p>
<h2 id="返回类型声明"><a href="#返回类型声明" class="headerlink" title="返回类型声明"></a>返回类型声明</h2><blockquote>
<ul>
<li>int</li>
<li>float</li>
<li>bool</li>
<li>string</li>
<li>interfaces</li>
<li>array</li>
<li>callable</li>
</ul>
<p>这些类型可以作为返回值类型声明</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="keyword">declare</span>(strict_types = <span class="number">1</span>);</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">returnIntValue</span><span class="params">(int $value)</span>: <span class="title">int</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $value;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">print</span>(returnIntValue(<span class="number">5</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 5</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="keyword">declare</span>(strict_types = <span class="number">1</span>);</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">returnIntValue</span><span class="params">(int $value)</span>: <span class="title">int</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $value + <span class="number">1.0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">print</span>(returnIntValue(<span class="number">5</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Fatal error: Uncaught TypeError: Return value of returnIntValue() must be of the type integer, float returned…</p>
<h2 id="Null合并运算符"><a href="#Null合并运算符" class="headerlink" title="Null合并运算符"></a>Null合并运算符</h2><blockquote>
<p>空合并运算符(??)已被引入。它被用来代替三元运算并与 isset()函数功能结合一起使用。如果它存在并且它不是空的，空合并运算符返回它的第一个操作数;否则返回第二个操作数</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">// fetch the value of $_GET['user'] and returns 'not passed'</span></span><br><span class="line">   <span class="comment">// if username is not passed</span></span><br><span class="line">   $username = $_GET[<span class="string">'username'</span>] ?? <span class="string">'not passed'</span>;</span><br><span class="line">   <span class="keyword">print</span>($username);</span><br><span class="line">   <span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Equivalent code using ternary operator</span></span><br><span class="line">   $username = <span class="keyword">isset</span>($_GET[<span class="string">'username'</span>]) ? $_GET[<span class="string">'username'</span>] : <span class="string">'not passed'</span>;</span><br><span class="line">   <span class="keyword">print</span>($username);</span><br><span class="line">   <span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="comment">// Chaining ?? operation</span></span><br><span class="line">   $username = $_GET[<span class="string">'username'</span>] ?? $_POST[<span class="string">'username'</span>] ?? <span class="string">'not passed'</span>;</span><br><span class="line">   <span class="keyword">print</span>($username);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; not passed</p>
<p>==&gt; not passed</p>
<p>==&gt; not passed</p>
<h2 id="飞船操作符"><a href="#飞船操作符" class="headerlink" title="飞船操作符"></a>飞船操作符</h2><blockquote>
<p>它是用于比较两个表达式。当第一个表达式比第二个表达式分别小于，等于或大于它返回-1，0或1。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//integer comparison</span></span><br><span class="line">   <span class="keyword">print</span>( <span class="number">1</span> &lt;=&gt; <span class="number">1</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="number">1</span> &lt;=&gt; <span class="number">2</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="number">2</span> &lt;=&gt; <span class="number">1</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="comment">//float comparison</span></span><br><span class="line">   <span class="keyword">print</span>( <span class="number">1.5</span> &lt;=&gt; <span class="number">1.5</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="number">1.5</span> &lt;=&gt; <span class="number">2.5</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="number">2.5</span> &lt;=&gt; <span class="number">1.5</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="comment">//string comparison</span></span><br><span class="line">   <span class="keyword">print</span>( <span class="string">"a"</span> &lt;=&gt; <span class="string">"a"</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="string">"a"</span> &lt;=&gt; <span class="string">"b"</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">   <span class="keyword">print</span>( <span class="string">"b"</span> &lt;=&gt; <span class="string">"a"</span>);<span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt;</p>
<p>​    0<br>​    -1<br>​    1</p>
<p>​    0<br>​    -1<br>​    1</p>
<p>​    0<br>​    -1<br>​    1</p>
<p>&lt;==</p>
<h2 id="常亮数组"><a href="#常亮数组" class="headerlink" title="常亮数组"></a>常亮数组</h2><blockquote>
<p>使用 define() 函数定义。 在PHP5.6，它们只能使用 const 关键字定义</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//define a array using define function</span></span><br><span class="line">   define(<span class="string">'animals'</span>, [</span><br><span class="line">      <span class="string">'dog'</span>,</span><br><span class="line">      <span class="string">'cat'</span>,</span><br><span class="line">      <span class="string">'bird'</span></span><br><span class="line">   ]);</span><br><span class="line">   <span class="keyword">print</span>(animals[<span class="number">1</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; cat</p>
<h2 id="匿名类-new-class"><a href="#匿名类-new-class" class="headerlink" title="匿名类 new class"></a>匿名类 new class</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="class"><span class="keyword">interface</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span><span class="params">(string $msg)</span></span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> $logger;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getLogger</span><span class="params">()</span>: <span class="title">Logger</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> $this-&gt;logger;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setLogger</span><span class="params">(Logger $logger)</span> </span>&#123;</span><br><span class="line">         $this-&gt;logger = $logger;</span><br><span class="line">      &#125;  </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   $app = <span class="keyword">new</span> Application;</span><br><span class="line">   $app-&gt;setLogger(<span class="keyword">new</span> <span class="class"><span class="keyword">class</span> <span class="keyword">implements</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span><span class="params">(string $msg)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">print</span>($msg);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">   $app-&gt;getLogger()-&gt;log(<span class="string">"My first Log Message"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; My first Log Message</p>
<h2 id="Closure-call"><a href="#Closure-call" class="headerlink" title="Closure::call()"></a>Closure::call()</h2><blockquote>
<p>Closure::call() 方法被添加作为临时绑定的对象范围，以封闭并简便调用它的方法。它的性能相比PHP5.6 bindTo要快得多。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bindTo</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> $x = <span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Define a closure Pre PHP 7 code</span></span><br><span class="line">   $getValue = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $this-&gt;x;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Bind a clousure</span></span><br><span class="line">   $value = $getValue-&gt;bindTo(<span class="keyword">new</span> A, <span class="string">'A'</span>); </span><br><span class="line"></span><br><span class="line">   <span class="keyword">print</span>($value());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 1</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Closure:call()</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> $x = <span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// PHP 7+ code, Define</span></span><br><span class="line">   $value = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $this-&gt;x;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">print</span>($value-&gt;call(<span class="keyword">new</span> A));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 1</p>
<h2 id="过滤unserialize"><a href="#过滤unserialize" class="headerlink" title="过滤unserialize()"></a>过滤unserialize()</h2><blockquote>
<p>unserialize()函数以在反序列化不受信任的数据对象时提供更好的安全性。它可以防止可能的代码注入，使开发人员能够使用序列化白名单类。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass1</span> </span>&#123; </span><br><span class="line">   <span class="keyword">public</span> $obj1prop;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> $obj2prop;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$obj1 = <span class="keyword">new</span> MyClass1();</span><br><span class="line">$obj1-&gt;obj1prop = <span class="number">1</span>;</span><br><span class="line">$obj2 = <span class="keyword">new</span> MyClass2();</span><br><span class="line">$obj2-&gt;obj2prop = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">$serializedObj1 = serialize($obj1);</span><br><span class="line">$serializedObj2 = serialize($obj2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// default behaviour that accepts all classes</span></span><br><span class="line"><span class="comment">// second argument can be ommited.</span></span><br><span class="line"><span class="comment">// if allowed_classes is passed as false, unserialize converts all objects into __PHP_Incomplete_Class object</span></span><br><span class="line">$data = unserialize($serializedObj1 , [<span class="string">"allowed_classes"</span> =&gt; <span class="keyword">true</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// converts all objects into __PHP_Incomplete_Class object except those of MyClass1 and MyClass2</span></span><br><span class="line">$data2 = unserialize($serializedObj2 , [<span class="string">"allowed_classes"</span> =&gt; [<span class="string">"MyClass1"</span>, <span class="string">"MyClass2"</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span>($data-&gt;obj1prop);</span><br><span class="line"><span class="keyword">print</span>(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line"><span class="keyword">print</span>($data2-&gt;obj2prop);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 1</p>
<p>==&gt; 2</p>
<h2 id="国际字符-IntlChar"><a href="#国际字符-IntlChar" class="headerlink" title="国际字符 IntlChar"></a>国际字符 IntlChar</h2><blockquote>
<p>新的 IntlChar 类添加其目的是公开更多的ICU功能。 这个类定义了许多可用于操纵Unicode字符的静态方法和常数。你需要在使用这个类之前安装 Intl 扩展。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">printf(<span class="string">'%x'</span>, IntlChar::CODEPOINT_MAX);</span><br><span class="line"><span class="keyword">print</span> (IntlChar::charName(<span class="string">'@'</span>));</span><br><span class="line"><span class="keyword">print</span>(IntlChar::ispunct(<span class="string">'!'</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 10ffff</p>
<p>==&gt; COMMERCIAL AT</p>
<p>==&gt; true</p>
<h2 id="伪随机数产生器"><a href="#伪随机数产生器" class="headerlink" title="伪随机数产生器"></a>伪随机数产生器</h2><blockquote>
<p>以下两个新的函数引入以产生一个跨平台的方式加密安全整数和字符串。</p>
<ul>
<li>random_bytes() - 生成加密安全伪随机字节。</li>
<li>random_int() - 生成加密安全伪随机整数。</li>
</ul>
</blockquote>
<h3 id="random-bytes"><a href="#random-bytes" class="headerlink" title="random_bytes()"></a>random_bytes()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$bytes = random_bytes(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">print</span>(bin2hex($bytes));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; 54cc305593</p>
<p>####语法</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string random_bytes ( int $length ) </span><br><span class="line"><span class="comment">// $length 返回随机串的字节长度  ==&gt; 返回包含加密安全随机字节的请求数量的字符串。</span></span><br></pre></td></tr></table></figure>
<h3 id="random-int"><a href="#random-int" class="headerlink" title="random_int()"></a>random_int()</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">print(random_int(100, 999));</span><br><span class="line">print("</span><br><span class="line">");</span><br><span class="line">print(random_int(-1000, 0));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>==&gt; 614</p>
<p>==&gt; -882</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int random_int ( int $min , int $max ) </span><br><span class="line"><span class="comment">// $min - 返回最小值，它必须是PHP_INT_MIN或更大的值</span></span><br><span class="line"><span class="comment">// $max - 返回最大值，它必须是小于或等于PHP_INT_MAX</span></span><br></pre></td></tr></table></figure>
<h2 id="期望-assert（）"><a href="#期望-assert（）" class="headerlink" title="期望 assert（）"></a>期望 assert（）</h2><blockquote>
<p>零成本生成断言</p>
</blockquote>
<h3 id="assert配置"><a href="#assert配置" class="headerlink" title="assert配置"></a>assert配置</h3><table>
<thead>
<tr>
<th>指令</th>
<th>默认值</th>
<th>可能的值</th>
</tr>
</thead>
<tbody>
<tr>
<td>zend.assertions</td>
<td>1</td>
<td><strong>1</strong> - 生成并执行代码(开发模式)<strong>0</strong> - 生成代码，但它在运行时<strong>-1</strong> - 不生成代码(生产模式)</td>
</tr>
<tr>
<td>assert.exception</td>
<td>0</td>
<td><strong>1</strong> - 当断言失败时抛出，要么抛出的异常，或者通过抛出一个新的 AssertionError 对象提供的对象，如果没有提供异常<strong>0</strong> - 使用或与上述生成的Throwable，但只能根据该对象的警告，而不是(与PHP 5兼容的行为)把它抛出</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">ini_set(<span class="string">'assert.exception'</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomError</span> <span class="keyword">extends</span> <span class="title">AssertionError</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="keyword">false</span>, <span class="keyword">new</span> CustomError(<span class="string">'Custom Error Message!'</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Fatal error: Uncaught CustomError: Custom Error Message! in…</p>
<h2 id="use语句"><a href="#use语句" class="headerlink" title="use语句"></a>use语句</h2><blockquote>
<p>单次使用 use 语句可以用来从同一个命名空间导入类，函数和常量(而不用多次使用 use 语句)。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// Before PHP 7</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ClassA</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ClassB</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ClassC</span> <span class="title">as</span> <span class="title">C</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">fn_a</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">fn_b</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">fn_c</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ConstA</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ConstB</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">com</span>\<span class="title">yiibai</span>\<span class="title">ConstC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP 7+ code</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">com</span>\<span class="title">yiibai</span>\&#123;<span class="title">ClassA</span>, <span class="title">ClassB</span>, <span class="title">ClassC</span> <span class="title">as</span> <span class="title">C</span>&#125;;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">com</span>\<span class="title">yiibai</span>\&#123;<span class="title">fn_a</span>, <span class="title">fn_b</span>, <span class="title">fn_c</span>&#125;;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">com</span>\<span class="title">yiibai</span>\&#123;<span class="title">ConstA</span>, <span class="title">ConstB</span>, <span class="title">ConstC</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="PHP错误处理"><a href="#PHP错误处理" class="headerlink" title="PHP错误处理"></a>PHP错误处理</h2><blockquote>
<p>从PHP7，错误处理和报告已经改变。PHP5中使用了传统的错误报告机制的错误，现在大多数的错误将通过抛出异常错误处理。类似于异常，这些错误异常会冒泡，直到它们到达第一个匹配的catch块。如果没有匹配的块，那么会使用 set_exception_handler() 安装一个默认的异常处理并被调用，并在情况下，如果没有默认的异常处理程序，那么该异常将被转换为一个致命的错误，并会像传统错误那样处理。</p>
<p>由于 Error 层次结构不是从异常(Exception)，代码扩展使用catch (Exception $e) { … } 块来处理未捕获的异常，PHP5中将不会处理这样的错误。  catch (Error $e) { … } 块或 set_exception_handler()处理程序需要处理的致命错误。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathOperations</span> </span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="keyword">protected</span> $n = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Try to get the Division by Zero error object and display as Exception</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doOperation</span><span class="params">()</span>: <span class="title">string</span></span><br><span class="line">   </span>&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         $value = $this-&gt;n % <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">return</span> $value;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (DivisionByZeroError $e) &#123;</span><br><span class="line">         <span class="keyword">return</span> $e-&gt;getMessage();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$mathOperationsObj = <span class="keyword">new</span> MathOperations();</span><br><span class="line"><span class="keyword">print</span>($mathOperationsObj-&gt;doOperation());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Modulo by zero</p>
<h2 id="整数除法-intdiv（）-gt-int"><a href="#整数除法-intdiv（）-gt-int" class="headerlink" title="整数除法 intdiv（）==&gt; int"></a>整数除法 intdiv（）==&gt; int</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$value = intdiv(10,3);</span><br><span class="line">var_dump($value);</span><br><span class="line">print("</span><br><span class="line">");</span><br><span class="line">print($value);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>==&gt; 3</p>
<h2 id="Session选项"><a href="#Session选项" class="headerlink" title="Session选项"></a>Session选项</h2><blockquote>
<p>从PHP7+，session_start()函数接受数组参数覆盖在php.ini中设置的会话配置指令。这些选项支持 session.lazy，在默认情况下如果PHP会话数据改变，那么会覆盖任何会话数据信息。</p>
<p>添加另一种选择是：read_and_close，这表明会话数据应被读取，然后该会话应当立即被关闭不变。例如，session.cache_limiter 设置为私有，并设置标志使用下面的代码片段之后立即关闭会话。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start([</span><br><span class="line">   <span class="string">'cache_limiter'</span> =&gt; <span class="string">'private'</span>,</span><br><span class="line">   <span class="string">'read_and_close'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="PHP7弃用的功能"><a href="#PHP7弃用的功能" class="headerlink" title="PHP7弃用的功能"></a>PHP7弃用的功能</h1><h2 id="PHP4风格的构造函数"><a href="#PHP4风格的构造函数" class="headerlink" title="PHP4风格的构造函数"></a>PHP4风格的构造函数</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">A</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">print</span>(<span class="string">'Style Constructor'</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Deprecated: Methods with the same name as their class will not be constructors in a future version of PHP; A has a deprecated constructor in…</p>
<h2 id="静态调用非静态方法"><a href="#静态调用非静态方法" class="headerlink" title="静态调用非静态方法"></a>静态调用非静态方法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">b</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">print</span>(<span class="string">'Non-static call'</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">A::b();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>==&gt; Deprecated: Non-static method A::b() should not be called statically in…Non-static call</p>
<h2 id="password-hash-salt-选项"><a href="#password-hash-salt-选项" class="headerlink" title="password_hash() - salt 选项"></a>password_hash() - salt 选项</h2><p>password_hash()函数的salt选项已被弃用，使开发人员不会产生他们自己的(通常是不安全的)salt。函数本身生成一个加密的安全salt，在开发者没有提供salt值时 - 因此，定制 salt 生成不再需要了。</p>
<h2 id="capture-session-meta-SSL上下文选项"><a href="#capture-session-meta-SSL上下文选项" class="headerlink" title="capture_session_meta SSL上下文选项"></a>capture_session_meta SSL上下文选项</h2><p>capture_session_meta SSL上下文选项已被弃用。 SSL元数据现在通过stream_get_meta_data()函数获取。</p>
<h1 id="PHP7已删除的SAPI"><a href="#PHP7已删除的SAPI" class="headerlink" title="PHP7已删除的SAPI"></a>PHP7已删除的SAPI</h1><ul>
<li>aolserver</li>
<li>apache</li>
<li>apache_hooks</li>
<li>apache2filter</li>
<li>caudium</li>
<li>continuity</li>
<li>isapi</li>
<li>milter</li>
<li>nsapi</li>
<li>phttpd</li>
<li>pi3web</li>
<li>roxen</li>
<li>thttpd</li>
<li>tux</li>
<li>webjames</li>
</ul>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                    
                        <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci='c3ca9952e91907755616'
        data-cs='19c670c29e49822a7953235407f57daa216eb579'
        data-r='Blog'
        data-o='ObjectBoy'
        data-a='ObjectBoy'
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
